DefParameterType(
    'XArgsOptional',
    sub {
        my ($gullet, $default, $usedefault, $inner) = @_;
        my $value = $gullet->readOptional;

	if(
		($usedefault && ToString($value) eq ToString($usedefault)) ||
		(!defined $usedefault && ToString($value) eq '')
	) {
		$value = $default;
	}

        $value;
    },
    optional => 1
);
